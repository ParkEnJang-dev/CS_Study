# 🍪 쿠키(Cookie) vs 세션(Session)

## 1. 배경: 왜 필요한가?

* **Stateless**: HTTP는 상태를 유지하지 않습니다. 즉, 클라이언트가 이전에 보낸 요청을 서버가 기억하지 못합니다.
* **해결책**: 로그인을 유지하거나 장바구니 기능을 구현하기 위해 사용자의 상태 정보를 저장하는 메커니즘이 필요합니다.

---

## 2. 쿠키 (Cookie)

사용자의 브라우저(클라이언트)에 저장되는 작은 텍스트 파일입니다.

* **저장 위치**: 클라이언트 (브라우저 메모리 또는 하드디스크)
* **동작 방식**: 서버가 응답 헤더(`Set-Cookie`)에 정보를 담아 보내면, 브라우저가 보관하다가 다음 요청 때 자동으로 헤더에 담아 보냅니다.
* **특징**:
* **속도**: 서버를 거치지 않고 브라우저에서 바로 읽으므로 빠릅니다.
* **보안**: 클라이언트에 평문으로 저장되므로 탈취 및 변조 위험이 큽니다.
* **라이프사이클**: 만료 날짜를 설정하면 브라우저를 닫아도 유지될 수 있습니다.



---

## 3. 세션 (Session)

사용자의 상태 정보를 **서버**에서 관리하는 방식입니다.

* **저장 위치**: 서버 (메모리, DB, 또는 Redis 같은 캐시 서버)
* **동작 방식**:
1. 클라이언트가 접속하면 서버는 고유한 **Session ID**를 발급합니다.
2. 서버는 이 ID를 쿠키에 담아 클라이언트에 전달합니다.
3. 클라이언트는 요청마다 Session ID를 보내고, 서버는 이 ID로 내부 저장소에서 데이터를 찾아 사용자를 식별합니다.


* **특징**:
* **보안**: 실제 데이터는 서버에 있으므로 쿠키보다 안전합니다.
* **부하**: 사용자가 많아질수록 서버의 메모리/DB 자원을 많이 소모합니다.



---

## 4. 한눈에 비교하기

| 구분 | 쿠키 (Cookie) | 세션 (Session) |
| --- | --- | --- |
| **저장 위치** | 클라이언트 (브라우저) | 서버 |
| **보안** | 낮음 (데이터 노출 위험) | 높음 (데이터는 서버에만 존재) |
| **속도** | 빠름 | 서버 처리가 필요하므로 쿠키보다 느림 |
| **용량 제한** | 한 도메인당 20개, 총 4KB | 서버 자원이 허용하는 한 제한 없음 |
| **데이터 종류** | 장바구니, 아이디 저장, 팝업 '오늘 그만 보기' | 로그인 정보, 민감한 개인정보 |

---

## 5. 면접 심화 Q&A

### **Q1. 세션을 쓰면 쿠키는 안 쓰는 건가요?**

> **A:** 아닙니다. 세션도 결국 **Session ID를 클라이언트에게 전달하기 위해 쿠키를 사용**합니다. 쿠키는 정보를 담는 '그릇'이고, 세션은 그 그릇에 'ID값'만 담아 서버의 데이터를 대조하는 '방식'입니다.

### **Q2. 최근에는 JWT(JSON Web Token)를 많이 쓴다는데 왜 그런가요?**

> **A:** 세션은 서버 메모리를 차지하고, 서버가 여러 대(분산 환경)일 경우 세션 공유 설정이 복잡합니다. 반면 **JWT**는 토큰 자체에 정보를 암호화해 담고 있어 서버가 상태를 저장할 필요가 없는 **Stateless**한 장점이 있어 MSA 구조에서 선호됩니다.

### **Q3. 쿠키의 보안을 강화하는 방법은?**

> **A:** > 1. **HttpOnly**: 자바스크립트(XSS)로 쿠키에 접근하는 것을 막습니다.
> 2. **Secure**: HTTPS 통신일 때만 쿠키를 전송하도록 설정합니다.
> 3. **SameSite**: 타 도메인에서 쿠키 전송을 제한하여 CSRF 공격을 방지합니다.

---
