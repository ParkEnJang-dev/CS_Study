# β–οΈ Load Balancer: L4 vs L7 μ™„λ²½ λΉ„κµ

## 1. L4 λ΅λ“λ°Έλ°μ„ (μ „μ†΅ κ³„μΈµ)

**L4(Transport Layer)** μ •λ³΄λ¥Ό λ°”νƒ•μΌλ΅ νΈλν”½μ„ λ¶„μ‚°ν•©λ‹λ‹¤.

* **νλ‹¨ κ·Όκ±°:** **IP μ£Όμ†, ν¬νΈ λ²νΈ, μ „μ†΅ ν”„λ΅ν† μ½(TCP/UDP)**.
* **νΉμ§•:**
* λ°μ΄ν„°μ λ‚΄μ©μ„ λ³΄μ§€ μ•κ³  ν¨ν‚· λ λ²¨μ—μ„λ§ λ¶„μ‚°ν•κΈ° λ•λ¬Έμ— **μ†λ„κ°€ λ§¤μ° λΉ λ¥΄κ³  ν¨μ¨μ **μ…λ‹λ‹¤.
* λ°μ΄ν„° μ•”νΈν™”(HTTPS)λ¥Ό ν•΄μ ν•  ν•„μ”κ°€ μ—†μ–΄ λ³΄μ•μ μΌλ΅ μ•μ „ν•κ³  λ¶€ν•κ°€ μ μµλ‹λ‹¤.


* **μ¥μ :** μ €λ ΄ν• λΉ„μ©, λ†’μ€ λ°μ΄ν„° μ²λ¦¬ μ„±λ¥.
* **λ‹¨μ :** μ‚¬μ©μμ μ”μ²­ λ‚΄μ©(URL, μΏ ν‚¤ λ“±)μ— λ”°λ¥Έ μ •κµν• λΌμ°ν…μ΄ λ¶κ°€λ¥ν•©λ‹λ‹¤.

## 2. L7 λ΅λ“λ°Έλ°μ„ (μ‘μ© κ³„μΈµ)

**L7(Application Layer)** μ •λ³΄λ¥Ό λ°”νƒ•μΌλ΅ νΈλν”½μ„ λ¶„μ‚°ν•©λ‹λ‹¤. ν„λ€ μ›Ή μ„λΉ„μ¤μ—μ„ κ°€μ¥ λ§μ΄ μ“°μ΄λ” λ°©μ‹μ…λ‹λ‹¤.

* **νλ‹¨ κ·Όκ±°:** **HTTP ν—¤λ”, μΏ ν‚¤, URL, SSL ID, λ©”μ‹μ§€ λ‚΄μ©**.
* **νΉμ§•:**
* ν¨ν‚·μ λ‚΄μ©μ„ λ¶„μ„ν•μ—¬ **μ½ν…μΈ  κΈ°λ° λΌμ°ν…**μ΄ κ°€λ¥ν•©λ‹λ‹¤. (μ: `/api/v1`μ€ A μ„λ²„λ΅, `/image`λ” B μ„λ²„λ΅ μ „μ†΅)
* λΉ„μ •μƒμ μΈ νΈλν”½μ„ ν•„ν„°λ§(Dos/DDoS λ°©μ–΄)ν•λ” λ“± λ³΄μ• κΈ°λ¥μ„ μν–‰ν•  μ μμµλ‹λ‹¤.


* **μ¥μ :** λ§¤μ° μ •κµν• νΈλν”½ μ μ–΄κ°€ κ°€λ¥ν•λ©°, λ§μ΄ν¬λ΅μ„λΉ„μ¤ μ•„ν‚¤ν…μ²(MSA)μ— μ ν•©ν•©λ‹λ‹¤.
* **λ‹¨μ :** ν¨ν‚· λ‚΄μ©μ„ λ¶„μ„ν•΄μ•Ό ν•λ―€λ΅ L4μ— λΉ„ν•΄ **λΉ„μ©μ΄ λ†’κ³  μμ› μ†λ¨κ°€ ν½λ‹λ‹¤.** (SSL λ³µνΈν™” μ‘μ—… λ“±)

---

## 3. ν•µμ‹¬ μ°¨μ΄μ  μ”μ•½ν‘

| λΉ„κµ ν•­λ© | L4 λ΅λ“λ°Έλ°μ„ | L7 λ΅λ“λ°Έλ°μ„ |
| --- | --- | --- |
| **κ³„μΈµ** | Transport Layer (4κ³„μΈµ) | Application Layer (7κ³„μΈµ) |
| **μ‹λ³„ λ°μ΄ν„°** | IP, ν¬νΈ, TCP/UDP | **URL, HTTP ν—¤λ”, μΏ ν‚¤, λ°μ΄ν„° λ‚΄μ©** |
| **μ£Όμ” νΉμ§•** | μ†λ„ λΉ λ¦„, λ‹¨μ λ¶„μ‚° | **μ •κµν• λ¶„μ‚°(μ½ν…μΈ  κΈ°λ°), λ³΄μ• κΈ°λ¥** |
| **λ¶€ν• μ •λ„** | λ‚®μ | λ†’μ (ν¨ν‚· λ¶„μ„ ν•„μ”) |
| **λΉ„μ ** | μ£Όμ†μ™€ λ²μ§€μλ§ λ³΄κ³  λ°°λ‹¬ | **λ‚΄μ©λ¬Όμ„ ν™•μΈν•κ³  λ©μ μ§€ λ¶„λ¥** |

---

## 4. λ©΄μ ‘μ© μ‹¬ν™” κ°λ…

### π”Ή Health Check (ν—¬μ¤ μ²΄ν¬)

λ΅λ“λ°Έλ°μ„κ°€ μ„λ²„μ μƒνƒλ¥Ό μ£ΌκΈ°μ μΌλ΅ ν™•μΈν•λ” κΈ°λ¥μ…λ‹λ‹¤. μ„λ²„κ°€ μ‘λ‹µν•μ§€ μ•μΌλ©΄ ν•΄λ‹Ή μ„λ²„λ¥Ό λ¶„μ‚° λ€μƒμ—μ„ μ μ™Έν•μ—¬ μ„λΉ„μ¤ κ°€μ©μ„±μ„ μ μ§€ν•©λ‹λ‹¤. (L4λ” ν¬νΈ μ—°κ²° ν™•μΈ, L7μ€ νΉμ • νμ΄μ§€ μ‘λ‹µ ν™•μΈ)

### π”Ή Sticky Session (μ¤ν‹°ν‚¤ μ„Έμ…)

νΉμ • μ‚¬μ©μμ μ”μ²­μ΄ ν•­μƒ κ°™μ€ μ„λ²„λ΅ μ „λ‹¬λλ„λ΅ κ³ μ •ν•λ” κΈ°λ¥μ…λ‹λ‹¤. μ‚¬μ©μκ°€ λ΅κ·ΈμΈν• μƒνƒμ—μ„ μ„Έμ… μ •λ³΄κ°€ ν•΄λ‹Ή μ„λ²„ λ©”λ¨λ¦¬μ— μμ„ λ• μ μ©ν•μ§€λ§, νΉμ • μ„λ²„μ— λ¶€ν•κ°€ μ λ¦΄ μ„ν—μ΄ μμµλ‹λ‹¤.

### π”Ή SSL Termination (SSL μΆ…λ‹¨)

L7 λ΅λ“λ°Έλ°μ„μ—μ„ HTTPS μ•”νΈν™”λ¥Ό λ³µνΈν™”ν•κ³ , λ‚΄λ¶€ μ„λ²„μ™€λ” HTTPλ΅ ν†µμ‹ ν•λ” λ°©μ‹μ…λ‹λ‹¤. μ„λ²„κ°€ μ•”λ³µνΈν™” κ³„μ‚°μ— μμ›μ„ μ“°λ” λ€μ‹  λΉ„μ¦λ‹μ¤ λ΅μ§μ— μ§‘μ¤‘ν•  μ μκ² ν•΄μ¤λ‹λ‹¤.

---

**π’΅ λ©΄μ ‘ λ‹µλ³€ ν**

> "L4 λ΅λ“λ°Έλ°μ„λ” IPμ™€ ν¬νΈλ¥Ό κΈ°λ°μΌλ΅ λΉ λ¥΄κ³  λ‹¨μν•κ² νΈλν”½μ„ λ‚λ„λ” λ° κ°•μ μ΄ μκ³ , L7 λ΅λ“λ°Έλ°μ„λ” HTTP μ”μ²­ λ‚΄μ©(URL, μΏ ν‚¤ λ“±)μ„ λ¶„μ„ν•μ—¬ μ„λΉ„μ¤ νΉμ„±μ— λ§μ¶° μ •κµν•κ² λ¶„μ‚°ν•  μ μλ‹¤λ” μ°¨μ΄κ°€ μμµλ‹λ‹¤. λ€κ·λ¨ μ„λΉ„μ¤λ‚ MSA κµ¬μ΅°μ—μ„λ” L7μ„ ν†µν•΄ μ½ν…μΈ λ³„λ΅ μ„λ²„λ¥Ό λ‚λ„λ” λ°©μ‹μ„ μ£Όλ΅ μ‚¬μ©ν•©λ‹λ‹¤."