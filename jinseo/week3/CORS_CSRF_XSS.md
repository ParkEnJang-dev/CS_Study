# 🛡️ 웹 보안 핵심 개념: CORS, CSRF, XSS

## 1. XSS (Cross-Site Scripting, 교차 사이트 스크립팅)

공격자가 상대방의 브라우저에 **악성 자바스크립트를 삽입**하여 실행시키는 공격입니다.

* **공격 원리**: 게시판, 댓글창 등에 `<script>alert(document.cookie)</script>`와 같은 코드를 작성하여, 이를 열람하는 사용자의 쿠키(세션 ID 등)를 탈취하거나 페이지를 변조합니다.
* **방어 대책**:
* **입출력 필터링**: 사용자의 입력을 믿지 않고 `< >` 같은 특수 문자를 `&lt; &gt;`로 치환(**Escaping**)합니다.
* **HttpOnly 쿠키**: 자바스크립트로 쿠키를 읽을 수 없게 설정하여 세션 탈취를 방지합니다.
* **CSP (Content Security Policy)**: 웹 페이지에서 실행할 수 있는 스크립트의 출처를 제한하는 정책을 설정합니다.



---

## 2. CSRF (Cross-Site Request Forgery, 사이트 간 요청 위조)

사용자가 자신의 의지와 무관하게 **공격자가 의도한 행위(수정, 삭제, 등록 등)를 특정 웹사이트에 요청**하게 만드는 공격입니다.

* **공격 원리**: 사용자가 특정 사이트(예: 은행)에 로그인되어 쿠키가 남아있는 상태에서, 공격자가 만든 악성 링크를 클릭하면 브라우저가 자동으로 쿠키를 담아 은행 서버에 "돈 보내기" 같은 요청을 보냅니다.
* **방어 대책**:
* **CSRF Token**: 요청 시마다 서버가 생성한 일회용 토큰을 함께 전달하여 서버에서 검증합니다.
* **SameSite 쿠키 설정**: 쿠키 설정 시 `SameSite=Lax` 또는 `Strict`를 사용하여 타 도메인에서의 쿠키 전송을 제한합니다.
* **재인증 요구**: 중요 작업(비밀번호 변경 등) 시 비밀번호를 다시 입력받거나 2차 인증을 수행합니다.



---

## 3. CORS (Cross-Origin Resource Sharing, 교차 출처 리소스 공유)

사실 CORS는 공격이라기보다는 **브라우저의 보안 정책**입니다. 다른 출처(Origin) 간의 자원 공유를 허용할지 결정합니다.

* **배경 (SOP)**: 브라우저는 보안을 위해 같은 출처에서만 리소스를 주고받을 수 있는 **SOP(Same-Origin Policy)**를 따릅니다. 하지만 현대 웹은 API 서버와 프론트 서버가 다른 경우가 많아 예외가 필요해졌습니다.
* **동작 방식**:
1. 브라우저가 본 요청 전 **Preflight(OPTIONS 메서드)**를 보내 서버가 허용하는지 먼저 확인합니다.
2. 서버 응답 헤더의 `Access-Control-Allow-Origin`에 명시된 출처인 경우에만 리소스를 전달합니다.


* **해결 방법**: 서버에서 허용할 출처(Origin)를 명시적으로 설정해주어야 합니다.

---

## 📌 한눈에 비교 요약

| 구분 | XSS | CSRF | CORS |
| --- | --- | --- | --- |
| **핵심** | **스크립트 실행** | **권한 도용(요청 위조)** | **출처 허용 정책** |
| **공격 대상** | 클라이언트 (사용자 브라우저) | 서버 (사용자 권한 이용) | 브라우저 보안 정책 |
| **주요 목적** | 쿠키 탈취, 페이지 변조 | 비정상적인 행위 강제 수행 | 다른 도메인 간 리소스 공유 |
| **해결사** | 필터링, HttpOnly | CSRF 토큰, SameSite | 서버의 허용 헤더 설정 |

---

## 💬 면접 답변 팁

> "XSS는 **사용자의 브라우저에서 스크립트가 실행**되게 하여 정보를 빼내는 공격인 반면, CSRF는 **로그인된 사용자의 권한을 이용**해 서버에 원치 않는 요청을 보내는 공격입니다. CORS는 이러한 보안 상의 이유로 브라우저가 **다른 도메인 간의 데이터 교환을 제한**하는 정책을 말합니다."

---
