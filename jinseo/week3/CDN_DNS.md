# 🌐 DNS & CDN 완벽 정리

## 1. DNS (Domain Name System)

DNS는 사람이 읽을 수 있는 **도메인 이름(예: https://www.google.com/search?q=google.com)**을 컴퓨터가 이해할 수 있는 **IP 주소(예: 142.250.190.46)**로 변환해주는 전 세계적인 거대 전화번호부 시스템입니다.

### 🔹 작동 원리 (Recursive Query 과정)

사용자가 브라우저에 URL을 입력하면 다음과 같은 계층적 구조를 거칩니다.

1. **Local DNS Server**: 먼저 캐시를 확인하고, 없으면 상위 서버에 물어봅니다.
2. **Root DNS Server**: `.com`, `.net` 같은 **TLD(최상위 도메인)** 서버의 주소를 알려줍니다.
3. **TLD DNS Server**: 해당 도메인을 관리하는 **Authoritative DNS(권한 있는 DNS)** 서버의 주소를 알려줍니다.
4. **Authoritative DNS Server**: 최종적으로 실제 서버의 **IP 주소**를 찾아 반환합니다.

### 🔹 핵심 개념

* **TTL (Time To Live)**: DNS 설정값이 캐시에 유지되는 시간입니다. 설정이 변경되었을 때 전 세계에 반영되는 속도에 영향을 줍니다.
* **A Record vs CNAME**:
* **A Record**: 도메인을 직접 **IP 주소**에 연결 (예: example.com -> 1.2.3.4)
* **CNAME**: 도메인을 **다른 도메인**에 연결 (예: [www.example.com](https://www.example.com) -> example.com)



---

## 2. CDN (Content Delivery Network)

CDN은 지리적으로 분산된 여러 개의 서버(**Edge Server**)에 콘텐츠를 저장(캐싱)하여, 사용자에게 가장 가까운 곳에서 데이터를 전송해주는 기술입니다.

### 🔹 주요 목적

1. **지연 시간(Latency) 감소**: 물리적 거리가 짧아져 응답 속도가 빨라집니다.
2. **서버 부하 분산**: 메인 서버(Origin Server)로 몰리는 트래픽을 CDN 노드들이 나누어 처리합니다.
3. **보안 강화**: DDoS 공격을 엣지 서버 단에서 방어하는 완충 역할을 합니다.

### 🔹 캐싱 전략

* **Static Caching**: 이미지, JS, CSS 파일처럼 자주 변하지 않는 파일을 저장하여 즉시 전달합니다.
* **Dynamic Acceleration**: 정적 파일뿐만 아니라, 경로 최적화 기술을 통해 동적 콘텐츠(API 등)의 통신 효율을 높입니다.

---

## 3. DNS와 CDN의 관계 (면접용 답변)

**"사용자가 웹사이트에 접속하는 전체 과정에서 두 기술은 어떻게 협력하나요?"**

> "먼저 **DNS**를 통해 도메인을 IP로 변환하는데, 이때 일반 서버의 IP가 아니라 **CDN 서비스의 주소(CNAME)**를 반환하게 합니다. 그러면 브라우저는 가장 가까운 **CDN Edge 서버**로 접속하게 되고, 그곳에 저장된 데이터(캐시)를 즉시 받아보게 됩니다. 만약 캐시가 없다면 CDN 서버가 다시 원본 서버(Origin)에서 데이터를 가져와 사용자에게 전달하고 저장합니다."

---

## 4. 기술 면접 예상 질문 (Q&A)

**Q1. DNS 쿼리 과정에서 UDP를 사용하는 이유는 무엇인가요?**

> **A:** DNS 쿼리는 데이터 양이 매우 적고 빠른 응답이 중요하기 때문입니다. TCP의 3-Way Handshake 과정 없이 즉각적으로 요청과 응답을 주고받는 UDP가 성능상 훨씬 유리합니다. (단, 결과 데이터가 크면 TCP를 쓰기도 합니다.)

**Q2. CDN 서비스 이용 시 발생할 수 있는 문제점은?**

> **A:** 원본 서버의 데이터가 수정되었을 때, CDN 엣지 서버에 남아있는 구형 캐시 때문에 사용자가 옛날 데이터를 볼 수 있습니다. 이를 해결하기 위해 **Purge(강제 삭제)** 기능을 사용하거나 파일 이름에 버전을 부여하는 전략이 필요합니다.

**Q3. 전 세계적인 서비스를 운영할 때 DNS의 역할은?**

> **A:** **GSLB (Global Server Load Balancing)** 기술을 적용한 DNS를 사용하면, 사용자의 접속 지역에 따라 가장 가까운 데이터센터의 IP를 반환하여 전 세계 어디서든 빠른 접속을 보장할 수 있습니다.

---
